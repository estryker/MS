<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">

<title>Class: ClientSqueak</title>

<link type="text/css" media="screen" href="./rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
</script>

<script type="text/javascript" charset="utf-8" src="./js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/darkfish.js"></script>


<body id="top" class="class">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="./index.html">Home</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  <div id="file-metadata">
    <nav id="file-list-section" class="section">
  <h3 class="section-header">Defined In</h3>
  <ul>
    <li>lib/mapsqueak.rb
  </ul>
</nav>

    
  </div>

  <div id="class-metadata">
    
    <nav id="parent-class-section" class="section">
  <h3 class="section-header">Parent</h3>
  
  <p class="link"><a href="Object.html">Object</a>
  
</nav>

    <!-- Included Modules -->
<nav id="includes-section" class="section">
  <h3 class="section-header">Included Modules</h3>

  <ul class="link-list">
  
  
    <li><a class="include" href="XmlHelpers.html">XmlHelpers</a>
  
  
  </ul>
</nav>

    <!-- Method Quickref -->
<nav id="method-list-section" class="section">
  <h3 class="section-header">Methods</h3>

  <ul class="link-list">
    
    <li><a href="#method-c-new">::new</a>
    
    <li><a href="#method-i-description-3D">#description=</a>
    
    <li><a href="#method-i-duration-3D">#duration=</a>
    
    <li><a href="#method-i-id-3D">#id=</a>
    
    <li><a href="#method-i-latitude-3D">#latitude=</a>
    
    <li><a href="#method-i-longitude-3D">#longitude=</a>
    
    <li><a href="#method-i-merge">#merge</a>
    
    <li><a href="#method-i-merge-21">#merge!</a>
    
    <li><a href="#method-i-text-3D">#text=</a>
    
    <li><a href="#method-i-to_hash">#to_hash</a>
    
    <li><a href="#method-i-to_json">#to_json</a>
    
    <li><a href="#method-i-to_s">#to_s</a>
    
    <li><a href="#method-i-to_xml">#to_xml</a>
    
  </ul>
</nav>

  </div>

  <div id="project-metadata">
    <nav id="fileindex-section" class="section project-section">
  <h3 class="section-header">Pages</h3>

  <ul>
  
    <li class="file"><a href="./README.html">README</a>
  
  </ul>
</nav>

    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="./ClientSqueak.html">ClientSqueak</a>
  
    <li><a href="./MapSqueakSession.html">MapSqueakSession</a>
  
    <li><a href="./Object.html">Object</a>
  
    <li><a href="./XmlHelpers.html">XmlHelpers</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation">
  <h1 class="class">class ClientSqueak</h1>

  <div id="description" class="description">
    
<p><a href="ClientSqueak.html">ClientSqueak</a> - a class that encapsulates a
client side squeak Note that if I am not the owner of a squeak, I will not
know the user</p>

  </div><!-- description -->

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    
    <!-- Attributes -->
    <section id="attribute-method-details" class="method-section section">
      <h3 class="section-header">Attributes</h3>

      
      <div id="attribute-i-created_at" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">created_at</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-i-description" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">description</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-i-duration" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">duration</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-i-expires" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">expires</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-i-gmaps" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">gmaps</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-i-id" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">id</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-i-latitude" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">latitude</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-i-longitude" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">longitude</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-i-text" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">text</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-i-time_utc" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">time_utc</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-i-updated_at" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">updated_at</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-i-user_email" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">user_email</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-i-username" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">username</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
    </section><!-- attribute-method-details -->
    

    <!-- Methods -->
    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Class Methods</h3>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">(squeak)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Initialize a new squeak which must be in an allowable format Must set:
latitude, longitude, text, and duration json - a String representation of a
JSON object</p>

<pre>e.g. {\&quot;squeak\&quot;:{\&quot;latitude\&quot;:\&quot;54\&quot;,\&quot;longitude\&quot;:\&quot;-1.5\&quot;,\&quot;duration\&quot;:\&quot;2\&quot;,\&quot;text\&quot;:\&quot;Another squeak!\&quot;}}</pre>

<p>xml - a String representation of an XML blob</p>

<pre>e.g. &lt;squeak&gt;&lt;latitude&gt;54&lt;/latitude&gt;&lt;longitude&gt;-1.5&lt;/longitude&gt;&lt;text&gt;Another squeak!&lt;/text&gt;&lt;duration&gt;2&lt;/duration&gt;&lt;/squeak&gt;</pre>

<p>hash - a hash representation of a squeak</p>

<pre class="ruby"><span class="ruby-identifier">e</span>.<span class="ruby-identifier">g</span>. {:<span class="ruby-identifier">squeak</span> =<span class="ruby-operator">&gt;</span> {:<span class="ruby-identifier">latitude=</span><span class="ruby-operator">&gt;</span> <span class="ruby-value">54</span>, :<span class="ruby-identifier">longitude=</span><span class="ruby-operator">&gt;</span><span class="ruby-value">-1.69</span>, :<span class="ruby-identifier">text</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Another squeak!&quot;</span>, :<span class="ruby-identifier">duration</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>}}
<span class="ruby-constant">OR</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">you</span> <span class="ruby-identifier">are</span> <span class="ruby-identifier">lazy</span> (<span class="ruby-identifier">like</span> <span class="ruby-identifier">me</span>) <span class="ruby-identifier">you</span> <span class="ruby-identifier">can</span> <span class="ruby-identifier">just</span> <span class="ruby-identifier">specify</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">inner</span> <span class="ruby-identifier">hash</span><span class="ruby-operator">:</span>
<span class="ruby-identifier">e</span>.<span class="ruby-identifier">g</span>. {:<span class="ruby-identifier">latitude=</span><span class="ruby-operator">&gt;</span> <span class="ruby-value">54</span>, :<span class="ruby-identifier">longitude=</span><span class="ruby-operator">&gt;</span><span class="ruby-value">-1.69</span>, :<span class="ruby-identifier">text</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Another squeak!&quot;</span>, :<span class="ruby-identifier">duration</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>}
</pre>
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File lib/mapsqueak.rb, line 191</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">squeak</span>)
  <span class="ruby-ivar">@original_squeak</span> = <span class="ruby-identifier">squeak</span>
  <span class="ruby-identifier">temp_hash</span> = {<span class="ruby-value">:squeak</span> =<span class="ruby-operator">&gt;</span> {}}
  <span class="ruby-keyword">case</span> <span class="ruby-identifier">squeak</span>
  <span class="ruby-keyword">when</span> <span class="ruby-constant">Hash</span>
    <span class="ruby-comment"># just to be nice, we won't force the user to specify the outer wrapping</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">squeak</span>.<span class="ruby-identifier">has_key?</span> <span class="ruby-string">'squeak'</span>
      <span class="ruby-identifier">temp_hash</span> = <span class="ruby-identifier">squeak</span>.<span class="ruby-identifier">dup</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">temp_hash</span> = {<span class="ruby-value">:squeak</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">squeak</span>}
    <span class="ruby-keyword">end</span>
    
  <span class="ruby-keyword">when</span> <span class="ruby-constant">String</span> 
    <span class="ruby-keyword">begin</span>
      <span class="ruby-identifier">temp_hash</span> = <span class="ruby-constant">JSON</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">squeak</span>)
    <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
      <span class="ruby-keyword">begin</span>
        <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Document</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">squeak</span>)
        <span class="ruby-comment"># a nice flexible way to parse the XML. as long as the XML </span>
        <span class="ruby-comment"># is only one level deep</span>
        <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">elements</span>.<span class="ruby-identifier">each</span>(<span class="ruby-string">'squeak/'</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">el</span> <span class="ruby-operator">|</span>
          <span class="ruby-identifier">el</span>.<span class="ruby-identifier">elements</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">child</span><span class="ruby-operator">|</span>
            <span class="ruby-identifier">temp_hash</span>[<span class="ruby-value">:squeak</span>][<span class="ruby-identifier">child</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_sym</span>] = <span class="ruby-identifier">child</span>.<span class="ruby-identifier">text</span>
          <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e2</span>
        <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;Can't parse squeak text: #{squeak}\n&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">e2</span>.<span class="ruby-identifier">backtrace</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;\n&quot;</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  
  <span class="ruby-identifier">t</span> = <span class="ruby-identifier">temp_hash</span>[<span class="ruby-string">'squeak'</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">temp_hash</span>[<span class="ruby-value">:squeak</span>]
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-identifier">t</span>)

  <span class="ruby-comment"># but we need to make sure that all of the mandatory parameters are defined</span>
  <span class="ruby-keyword">unless</span> (<span class="ruby-node">]latitude longitude text duration]</span> <span class="ruby-operator">-</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">to_hash</span>[<span class="ruby-value">:squeak</span>].<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">k</span><span class="ruby-operator">|</span> <span class="ruby-identifier">k</span>.<span class="ruby-identifier">to_s</span>}).<span class="ruby-identifier">empty?</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;Must have duration, lat and long and text&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- new-source -->
          
        </div>

        

        
      </div><!-- new-method -->

    
    </section><!-- public-class-method-details -->
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Instance Methods</h3>

    
      <div id="method-i-description-3D" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">description=</span><span
            class="method-args">(txt)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="ClientSqueak.html#method-i-text-3D">text=</a>
        </div>
        
      </div><!-- description-3D-method -->

    
      <div id="method-i-duration-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">duration=</span><span
            class="method-args">(duration)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>set the time to live for the squeak must be between 0.0 and 24.0</p>
          

          
          <div class="method-source-code" id="duration-3D-source">
            <pre><span class="ruby-comment"># File lib/mapsqueak.rb, line 307</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">duration=</span>(<span class="ruby-identifier">duration</span>)
  <span class="ruby-identifier">dur</span> = <span class="ruby-identifier">duration</span>.<span class="ruby-identifier">to_f</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;Bad duration&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">dur</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0.0</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;Bad duration&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">dur</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">24.0</span>
  <span class="ruby-ivar">@duration</span> = <span class="ruby-identifier">dur</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- duration-3D-source -->
          
        </div>

        

        
      </div><!-- duration-3D-method -->

    
      <div id="method-i-id-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">id=</span><span
            class="method-args">(id)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>set the id, but only allow it once. we don’t necessarily know the id at
construction time, so  this should be good enough for now.</p>
          

          
          <div class="method-source-code" id="id-3D-source">
            <pre><span class="ruby-comment"># File lib/mapsqueak.rb, line 233</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">id=</span>(<span class="ruby-identifier">id</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@id</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-ivar">@id</span> = <span class="ruby-identifier">id</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;Can't change a squeak's id&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- id-3D-source -->
          
        </div>

        

        
      </div><!-- id-3D-method -->

    
      <div id="method-i-latitude-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">latitude=</span><span
            class="method-args">(latitude)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>set the latitude for the squeak must be between  -90.0 and 90.0</p>
          

          
          <div class="method-source-code" id="latitude-3D-source">
            <pre><span class="ruby-comment"># File lib/mapsqueak.rb, line 289</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">latitude=</span>(<span class="ruby-identifier">latitude</span>)
  <span class="ruby-identifier">lat</span> = <span class="ruby-identifier">latitude</span>.<span class="ruby-identifier">to_f</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;Bad latitude&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">lat</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">-90.0</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;Bad latitude&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">lat</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">90.0</span>
  <span class="ruby-ivar">@latitude</span> = <span class="ruby-identifier">lat</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- latitude-3D-source -->
          
        </div>

        

        
      </div><!-- latitude-3D-method -->

    
      <div id="method-i-longitude-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">longitude=</span><span
            class="method-args">(longitude)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>set the longitude for the squeak must be between -180.0 and 180.0</p>
          

          
          <div class="method-source-code" id="longitude-3D-source">
            <pre><span class="ruby-comment"># File lib/mapsqueak.rb, line 298</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">longitude=</span>(<span class="ruby-identifier">longitude</span>)
  <span class="ruby-identifier">long</span> = <span class="ruby-identifier">longitude</span>.<span class="ruby-identifier">to_f</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;Bad longitude&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">long</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">-180.0</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;Bad longitude&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">long</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">180.0</span>
  <span class="ruby-ivar">@longitude</span> = <span class="ruby-identifier">long</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- longitude-3D-source -->
          
        </div>

        

        
      </div><!-- longitude-3D-method -->

    
      <div id="method-i-merge" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">merge</span><span
            class="method-args">(other)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>merge another Squeak’s parameters by letting the other’s parameters
overwrite the current Squeak’s parms.  Returns a copy Hash</p>
          

          
          <div class="method-source-code" id="merge-source">
            <pre><span class="ruby-comment"># File lib/mapsqueak.rb, line 273</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">merge</span>(<span class="ruby-identifier">other</span>)
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">to_hash</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-identifier">other</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- merge-source -->
          
        </div>

        

        
      </div><!-- merge-method -->

    
      <div id="method-i-merge-21" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">merge!</span><span
            class="method-args">(other)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>merge another Squeak’s parameters by letting the other’s parameters
overwrite the current Squeak’s parms.  Modifies the current Squeak</p>
          

          
          <div class="method-source-code" id="merge-21-source">
            <pre><span class="ruby-comment"># File lib/mapsqueak.rb, line 279</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">merge!</span>(<span class="ruby-identifier">other</span>)
  <span class="ruby-identifier">t</span> = <span class="ruby-identifier">other</span>.<span class="ruby-identifier">to_hash</span>
  <span class="ruby-identifier">t</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">k</span> <span class="ruby-operator">|</span>
    <span class="ruby-comment"># this will set and validate the parameters</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">send</span>(<span class="ruby-node">&quot;#{k.to_s.gsub('-','_')}=&quot;</span>,<span class="ruby-identifier">t</span>[<span class="ruby-identifier">k</span>])
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- merge-21-source -->
          
        </div>

        

        
      </div><!-- merge-21-method -->

    
      <div id="method-i-text-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">text=</span><span
            class="method-args">(txt)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>set the message portion of the squeak length can’t exceed 140</p>
          

          
          <div class="method-source-code" id="text-3D-source">
            <pre><span class="ruby-comment"># File lib/mapsqueak.rb, line 316</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">text=</span>(<span class="ruby-identifier">txt</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;Bad text length&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">txt</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">140</span>
  <span class="ruby-ivar">@text</span> = <span class="ruby-identifier">txt</span>.<span class="ruby-identifier">dup</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- text-3D-source -->
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="ClientSqueak.html#method-i-description-3D">description=</a>
        </div>
        

        
      </div><!-- text-3D-method -->

    
      <div id="method-i-to_hash" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to_hash</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>convert the squeak to a Hash</p>
          

          
          <div class="method-source-code" id="to_hash-source">
            <pre><span class="ruby-comment"># File lib/mapsqueak.rb, line 260</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_hash</span>
  {
    <span class="ruby-value">:squeak=</span><span class="ruby-operator">&gt;</span> {
      <span class="ruby-value">:latitude</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">latitude</span>.<span class="ruby-identifier">to_s</span>,
      <span class="ruby-value">:longitude</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">longitude</span>.<span class="ruby-identifier">to_s</span>,
      <span class="ruby-value">:duration</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">duration</span>.<span class="ruby-identifier">to_s</span>,
      <span class="ruby-value">:text</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">text</span>
    }
  }
<span class="ruby-keyword">end</span></pre>
          </div><!-- to_hash-source -->
          
        </div>

        

        
      </div><!-- to_hash-method -->

    
      <div id="method-i-to_json" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to_json</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>convert the squeak to JSON format</p>

<pre>e.g. {\&quot;squeak\&quot;:{\&quot;latitude\&quot;:\&quot;54\&quot;,\&quot;longitude\&quot;:\&quot;-1.5\&quot;,\&quot;duration\&quot;:\&quot;2\&quot;,\&quot;text\&quot;:\&quot;Another squeak!\&quot;}}</pre>
          

          
          <div class="method-source-code" id="to_json-source">
            <pre><span class="ruby-comment"># File lib/mapsqueak.rb, line 255</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_json</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">to_hash</span>.<span class="ruby-identifier">to_json</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- to_json-source -->
          
        </div>

        

        
      </div><!-- to_json-method -->

    
      <div id="method-i-to_s" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to_s</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>simply use <a href="ClientSqueak.html#method-i-to_s">#to_s</a> on the Hash
representation</p>
          

          
          <div class="method-source-code" id="to_s-source">
            <pre><span class="ruby-comment"># File lib/mapsqueak.rb, line 322</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_s</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">to_hash</span>.<span class="ruby-identifier">to_s</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- to_s-source -->
          
        </div>

        

        
      </div><!-- to_s-method -->

    
      <div id="method-i-to_xml" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to_xml</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>convert the squeak to XML format</p>

<pre>e.g. &lt;squeak&gt;&lt;latitude&gt;54&lt;/latitude&gt;&lt;longitude&gt;-1.5&lt;/longitude&gt;&lt;text&gt;Another squeak!&lt;/text&gt;&lt;duration&gt;2&lt;/duration&gt;&lt;/squeak&gt;</pre>
          

          
          <div class="method-source-code" id="to_xml-source">
            <pre><span class="ruby-comment"># File lib/mapsqueak.rb, line 243</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_xml</span>
  <span class="ruby-identifier">params_xml</span> = <span class="ruby-constant">Document</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">params_xml</span>.<span class="ruby-identifier">add_element</span>(<span class="ruby-string">'squeak'</span>)
  <span class="ruby-identifier">params_xml</span>.<span class="ruby-identifier">root</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">xml_element</span>(<span class="ruby-string">'latitude'</span>,<span class="ruby-keyword">self</span>.<span class="ruby-identifier">latitude</span>.<span class="ruby-identifier">to_s</span>)
  <span class="ruby-identifier">params_xml</span>.<span class="ruby-identifier">root</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">xml_element</span>(<span class="ruby-string">'longitude'</span>,<span class="ruby-keyword">self</span>.<span class="ruby-identifier">longitude</span>.<span class="ruby-identifier">to_s</span>)
  <span class="ruby-identifier">params_xml</span>.<span class="ruby-identifier">root</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">xml_element</span>(<span class="ruby-string">'text'</span>,<span class="ruby-keyword">self</span>.<span class="ruby-identifier">text</span>)
  <span class="ruby-identifier">params_xml</span>.<span class="ruby-identifier">root</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">xml_element</span>(<span class="ruby-string">'duration'</span>,<span class="ruby-keyword">self</span>.<span class="ruby-identifier">duration</span>.<span class="ruby-identifier">to_s</span>)
  <span class="ruby-identifier">params_xml</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- to_xml-source -->
          
        </div>

        

        
      </div><!-- to_xml-method -->

    
    </section><!-- public-instance-method-details -->
  
  </section><!-- 5Buntitled-5D -->

</div><!-- documentation -->


<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 3.11.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

